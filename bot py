#!/usr/bin/env python3
import os
import sys
import asyncio
from pyrogram import Client, filters, idle

# Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨ÙˆØª
API_ID = 32897964
API_HASH = "72837861fbafdc41735df5daa245402b"
BOT_TOKEN = "8534765454:AAFjZZbb35rjS594M2kF0NdFQpR5PbQX8qI"

# Ù‚Ù†ÙˆØ§Øª Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ
REQUIRED_CHANNELS = ["ALQUNAS8", "konfngats"]

# Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¹Ù…ÙŠÙ„
app = Client(
    "telegram_bot_render",
    api_id=API_ID,
    api_hash=API_HASH,
    bot_token=BOT_TOKEN,
    in_memory=True
)

# Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ
async def check_subscription(user_id):
    for channel in REQUIRED_CHANNELS:
        try:
            member = await app.get_chat_member(channel, user_id)
            if member.status in ["left", "kicked"]:
                return False
        except:
            return False
    return True

# Ø£Ù…Ø± /start
@app.on_message(filters.command("start") & filters.private)
async def start_cmd(client, message):
    user = message.from_user
    
    # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ
    if not await check_subscription(user.id):
        await message.reply(
            "âš ï¸ **ÙŠØ¬Ø¨ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ Ø§Ù„Ù‚Ù†ÙˆØ§Øª Ø£ÙˆÙ„Ø§Ù‹:**\n\n"
            "â€¢ @ALQUNAS8\n"
            "â€¢ @konfngats\n\n"
            "âœ… Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…ØŒ Ø£Ø¹Ø¯ Ø¥Ø±Ø³Ø§Ù„ /start"
        )
        return
    
    await message.reply(
        f"ğŸ‰ **Ø£Ù‡Ù„Ø§Ù‹ {user.first_name}!**\n\n"
        "ğŸ¤– **Ø¨ÙˆØª Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø§Øª**\n\n"
        "ğŸ‘‘ **Ø§Ù„Ù…Ø§Ù„Ùƒ:** @It_5_6\n"
        "ğŸ“ **Ø§Ù„Ù…Ù†ØµØ©:** Render.com\n\n"
        "ğŸ“ **Ù„Ø¥Ø±Ø³Ø§Ù„ Ù…ÙƒØ§Ù„Ù…Ø©:**\n"
        "Ø£Ø±Ø³Ù„ /send\n\n"
        "ğŸ“Š **Ù„Ø±Ø¤ÙŠØ© Ø­Ø§Ù„ØªÙƒ:**\n"
        "Ø£Ø±Ø³Ù„ /status"
    )

# Ø£Ù…Ø± /send
@app.on_message(filters.command("send") & filters.private)
async def send_cmd(client, message):
    user = message.from_user
    
    if not await check_subscription(user.id):
        await message.reply("âŒ Ø§Ø´ØªØ±Ùƒ ÙÙŠ Ø§Ù„Ù‚Ù†ÙˆØ§Øª Ø£ÙˆÙ„Ø§Ù‹!")
        return
    
    await message.reply(
        "ğŸ“ **Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø§Øª Ù…Ø¤Ù‚ØªØ§Ù‹:**\n\n"
        "â³ Ø¬Ø§Ø±ÙŠ ØªØ·ÙˆÙŠØ± Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙŠØ²Ø©...\n\n"
        "ğŸ“¢ ØªØ§Ø¨Ø¹ Ø§Ù„Ù‚Ù†ÙˆØ§Øª Ù„Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª:\n"
        "â€¢ @ALQUNAS8\n"
        "â€¢ @konfngats"
    )

# Ø£Ù…Ø± /status
@app.on_message(filters.command("status") & filters.private)
async def status_cmd(client, message):
    user = message.from_user
    await message.reply(
        f"ğŸ“Š **Ø­Ø§Ù„ØªÙƒ:**\n\n"
        f"ğŸ‘¤ **Ø§Ù„Ø§Ø³Ù…:** {user.first_name}\n"
        f"ğŸ†” **Ø§Ù„Ø±Ù‚Ù…:** {user.id}\n"
        f"ğŸ“ **Ø§Ù„Ø¨ÙˆØª ÙŠØ¹Ù…Ù„ Ø¹Ù„Ù‰:** Render.com\n"
        f"ğŸ‘‘ **Ø§Ù„Ù…Ø§Ù„Ùƒ:** @It_5_6"
    )

# Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
async def main():
    await app.start()
    bot = await app.get_me()
    
    print("=" * 50)
    print(f"âœ… **Ø§Ù„Ø¨ÙˆØª ÙŠØ¹Ù…Ù„!**")
    print(f"ğŸ¤– @{bot.username}")
    print(f"ğŸ‘¤ {bot.first_name}")
    print(f"ğŸ†” {bot.id}")
    print("ğŸ“ Render.com")
    print("=" * 50)
    
    # Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ù…Ø§Ù„Ùƒ
    try:
        await app.send_message(
            5594388143,  # Ø§Ù„Ù…Ø§Ù„Ùƒ
            f"âœ… **Ø§Ù„Ø¨ÙˆØª ÙŠØ¹Ù…Ù„ Ø¹Ù„Ù‰ Render!**\n\n"
            f"ğŸ¤– @{bot.username}\n"
            f"ğŸ‘¤ {bot.first_name}\n"
            f"ğŸ“ Render.com"
        )
    except:
        print("âš ï¸ Ù„Ù… Ø£ØªÙ…ÙƒÙ† Ù…Ù† Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ù…Ø§Ù„Ùƒ")
    
    await idle()

# Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„
if __name__ == "__main__":
    print("ğŸš€ Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨ÙˆØª...")
    asyncio.run(main())
